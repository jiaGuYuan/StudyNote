# numpy笔记

## 广播(Broadcasting)
广播是一种强大的机制，它允许numpy在执行算术运算时使用不同形状的数组.
将两个数组一起广播遵循以下规则：
1. 如果数组不具有相同的rank，则将较低等级数组的形状添加1，直到两个形状具有相同的长度。
2. 如果两个数组在维度上具有相同的大小，或者如果其中一个数组在该维度中的大小为1，则称这两个数组在维度上是兼容的。
3. 如果数组在所有维度上兼容，则可以一起广播。
4. 广播之后，每个阵列的行为就好像它的形状等于两个输入数组的形状的元素最大值。
5. 在一个数组的大小为1且另一个数组的大小大于1的任何维度中，第一个数组的行为就像沿着该维度复制一样


**广播规则说明:**
```
X = np.array([[1], [2]]) # X.shape -- (2, 1)
v = np.array([-1, -2, -3]) # v.shape -- (3,)
```
X + v #将对v进行广播,使其形状与X相同
1. X的shape为(2, 1), 而v的shape为(3,), 它们的rank不同, 将低等级数组v的shape形状加1; 得到形状为(1,3)的v1.  --v1 = np.reshape(v, (1, 3)) -- [[-1, -2, -3]]
2. 维度兼容判断: (维度上的大小相同 或其中一个在该维度上的大小为1, 则认为在该维度上兼容)
   X的shape为(2, 1), v的shape为(1, 3),
   v在第一个维度上大小为1 --所以它们在第一个维度上是兼容的; 
   X在第二个维度上大小为1 --所以它们在第二个维度上是兼容的.
3. 由2可知X与v在所有维度上兼容,所以X和v可以一起广播
4. X,v广播后的形状为X和v的形状的最大值. 
   第一个维度形状的最大值为2, 所以广播后的形状的第一个维度为2
   第二个维度形状的最大值为3, 所以广播后的形状的第二个维度为3
   --因此广播后的形状为(2, 3)
5. 在一个数组的大小为1且另一个数组的大小大于1的任何维度中，第一个数组的行为就像沿着该维度复制一样.
   因为X在第二个维度大小为1,所以其广播是沿着第二个维度复制; 广播后结果如下X_broadcast:
   np.array([[1, 1, 1],
             [2, 2, 2]])
   v在第一个维度的大小为1, 所以其广播是沿着第一个维度复制;广播后结果如下v_broadcast:
   np.array([[-1, -2, -3],
             [-1, -2, -3]])
```
X + v # 即 X_broadcast + v_broadcast:
array([[ 0, -1, -2],
       [ 1,  0, -1]])
```


### 切片的'后边界'问题
```
lst = np.array([1,2,3,4])
lst[0:-1] #[1,2,3]不包含最后一个元素
lst[0:] #[1,2,3,4]包含最后一个元素
```

