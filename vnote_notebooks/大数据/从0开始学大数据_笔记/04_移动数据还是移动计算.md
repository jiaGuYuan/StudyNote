# 04_移动数据还是移动计算

分布式架构，参考《大型网站技术架构：核心原理与案例分析》

**将程序分发到数据所在的地方进行计算，也就是所谓的移动计算比移动数据更划算.**

多台计算机要想合作构成一个系统，必须要在技术上重新架构:
    负载均衡、分布式缓存、分布式数据库、分布式服务等。


现在我们来看，移动计算程序到数据所在位置进行计算是如何实现的呢？
1. 将待处理的大规模数据存储在服务器集群上,主要使用HDFS分布式文件存储系统, 将文件分成很多块(Block), 以块为单位存储在集群的服务器上。
2. 大数据引擎根据集群里不同服务器的计算能力,在每台服务器上启动若干分布式任务执行进程,这些进程会等待给它们分配执行任务。
3. 使用大数据计算框架支持的编程模型进行编程(比如Hadoop的MapReduce编程模型，或者Spark的RDD编程模型)。应用程序编写好以后，将其打包，MapReduce和Spark都是在JVM环境中运行，所以打包出来的是一个Java的JAR包。
4. 用Hadoop或者Spark的启动命令执行这个应用程序的JAR包，首先执行引擎会解析程序要处理的数据输入路径，根据输入数据量的大小，将数据分成若干片（Split），每一个数据片都分配给一个任务执行进程去处理。
5. 任务执行进程收到分配的任务后，检查自己是否有任务对应的程序包，如果没有就去下载程序包，下载以后通过反射的方式加载程序。走到这里，最重要的一步，也就是移动计算就完成了。
6. 加载程序后，任务执行进程根据分配的数据片的文件地址和数据在文件内的偏移量读取数据，并把数据输入给应用程序相应的方法去执行，从而实现在分布式服务器集群中移动计算程序，对大规模数据进行并行处理的计算目标。

这只是大数据计算实现过程的简单描述，具体过程我们会在讲到HDFS、MapReduce和Spark的时候详细讨论。



























